<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Mumbai Property Expo — Interactive Prototype</title>
  <meta name="theme-color" content="#1E4DB7" />
  <style>
    :root{
      --blue:#1E4DB7;
      --blue-dark:#12337a;
      --gold:#D4A037;
      --bg:#f3f4f6;
      --card:#ffffff;
      --text:#111827;
    }
    *{box-sizing:border-box;}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      margin:0;
      background:var(--bg);
      color:var(--text);
    }

    /* HEADER / APP SHELL */
    header{
      background:linear-gradient(135deg,var(--blue),#2b63d4);
      color:white;
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position:sticky;
      top:0;
      z-index:40;
    }
    .brand{
      display:flex;
      gap:10px;
      align-items:center;
      min-width:0;
    }
    .logo{
      width:40px;
      height:40px;
      border-radius:12px;
      background:linear-gradient(180deg,var(--gold),#c58e2d);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:14px;
      color:#fff;
      flex-shrink:0;
    }
    h1{
      font-size:16px;
      margin:0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brand-sub{
      font-size:11px;
      opacity:0.9;
    }
    .controls{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:flex-end;
      flex-wrap:nowrap;
    }
    .controls input,
    .controls select{
      padding:6px 8px;
      border-radius:999px;
      border:none;
      font-size:11px;
      min-width:0;
    }
    .controls input{
      width:110px;
    }
    .controls select{
      background:rgba(255,255,255,0.16);
      color:#eef2ff;
    }
    .controls input::placeholder{
      color:#e5e7eb;
    }

    .btn{
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-weight:600;
      font-size:12px;
      padding:8px 12px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:4px;
      white-space:nowrap;
    }
    .primary{
      background:#f9fafb;
      color:var(--blue-dark);
    }
    .secondary{
      background:white;
      color:var(--blue);
      border:1px solid var(--blue);
    }

    /* LAYOUT */
    .container{
      padding:12px 12px 72px;
      max-width:1100px;
      margin:0 auto;
    }

    .banner{
      background:white;
      border-radius:18px;
      padding:14px 14px 12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      box-shadow:0 4px 14px rgba(15,23,42,0.10);
    }
    .banner h2{
      margin:0;
      font-size:15px;
    }
    .banner p{
      margin:4px 0 0;
      font-size:12px;
      color:#4b5563;
    }
    .banner-stats{
      font-size:11px;
      text-align:right;
      white-space:nowrap;
    }
    .banner-stat-number{
      font-weight:700;
      font-size:16px;
    }

    /* EXPO HALL */
    .section-label{
      font-size:11px;
      color:#6b7280;
      margin:12px 2px 6px;
      text-transform:uppercase;
      letter-spacing:0.04em;
    }
    .expo-hall{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:10px;
    }
    .booth{
      background:var(--card);
      padding:10px;
      border-radius:14px;
      box-shadow:0 4px 10px rgba(15,23,42,0.06);
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .booth:active{
      transform:scale(0.97);
      box-shadow:0 2px 6px rgba(15,23,42,0.18);
    }
    .booth .dev-name{
      font-weight:700;
      color:var(--blue-dark);
      font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .booth .projects{
      display:flex;
      gap:6px;
      margin-top:6px;
    }
    .project-thumb{
      width:100%;
      height:70px;
      border-radius:10px;
      object-fit:cover;
      background:#e5e7eb;
    }

    /* FEATURED + LEADS SIDEBAR */
    .layout-row{
      margin-top:14px;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .featured-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(190px,1fr));
      gap:10px;
    }
    .featured-card{
      background:white;
      border-radius:14px;
      padding:8px;
      box-shadow:0 4px 10px rgba(15,23,42,0.06);
      display:flex;
      flex-direction:column;
      height:100%;
    }
    .featured-card img{
      width:100%;
      height:110px;
      border-radius:10px;
      object-fit:cover;
    }
    .featured-title{
      font-size:13px;
      font-weight:600;
      margin-top:6px;
    }
    .featured-price{
      font-size:12px;
      color:#6b7280;
      margin-top:4px;
    }
    .featured-actions{
      margin-top:6px;
    }

    aside{
      width:280px;
      flex-shrink:0;
    }
    .card{
      background:white;
      border-radius:14px;
      padding:10px;
      box-shadow:0 4px 10px rgba(15,23,42,0.08);
    }
    .card-title{
      font-weight:700;
      font-size:13px;
      color:#111827;
    }
    .card-sub{
      font-size:11px;
      color:#6b7280;
      margin-top:3px;
    }
    .lead-list{
      margin-top:6px;
      background:#f9fafb;
      border-radius:10px;
      padding:6px;
      max-height:220px;
      overflow:auto;
      font-size:11px;
    }

    /* STALL MODAL (developer projects only) */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,0.5);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index:50;
    }
    .modal.open{
      display:flex;
    }
    .stall{
      width:100%;
      max-width:1100px;
      max-height:100%;
      background:white;
      border-radius:18px 18px 0 0;
      display:flex;
      flex-direction:column;
      padding:12px 14px 18px;
      box-shadow:0 -8px 18px rgba(15,23,42,0.35);
      overflow-y:auto;
    }

    .stall-header{
      display:flex;
      justify-content:center;
      align-items:center;
      margin-bottom:8px;
    }
    .stall-drag{
      width:38px;
      height:4px;
      border-radius:999px;
      background:#e5e7eb;
    }

    .stall-top{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .stall-logo-wrap{
      width:54px;
      height:54px;
      border-radius:16px;
      overflow:hidden;
      flex-shrink:0;
    }
    .stall-logo-wrap img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .stall-name{
      font-weight:800;
      font-size:15px;
    }
    .stall-tag{
      color:#6b7280;
      font-size:11px;
      margin-top:2px;
    }

    .stall-body{
      margin-top:10px;
    }
    .project-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:6px;
    }
    .project-card{
      background:#f9fafb;
      border-radius:12px;
      padding:8px;
      display:flex;
      gap:8px;
      align-items:flex-start;
    }
    .project-card img{
      width:90px;
      height:70px;
      border-radius:10px;
      object-fit:cover;
      flex-shrink:0;
    }
    .project-info-title{
      font-size:13px;
      font-weight:600;
    }
    .project-info-price{
      font-size:12px;
      color:#4b5563;
      margin-top:2px;
    }
    .project-info-actions{
      margin-top:6px;
    }

    /* GALLERY MODAL */
    .gallery-modal{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,0.85);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:60;
    }
    .gallery-modal.open{
      display:flex;
    }
    .gallery-content{
      width:100%;
      max-width:900px;
      max-height:100%;
      padding:12px 16px 18px;
      display:flex;
      flex-direction:column;
      color:white;
    }
    .gallery-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px;
    }
    .gallery-title{
      font-size:14px;
      font-weight:600;
    }
    .gallery-sub{
      font-size:11px;
      color:#e5e7eb;
    }
    .gallery-close{
      background:transparent;
      border:none;
      color:white;
      font-size:20px;
      cursor:pointer;
    }
    .gallery-frame{
      position:relative;
      background:#020617;
      border-radius:16px;
      padding:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:220px;
    }
    #galleryImage{
      max-width:100%;
      max-height:320px;
      border-radius:12px;
      object-fit:cover;
      display:block;
    }
    .gallery-form-slide{
      width:100%;
      max-width:420px;
      display:none;
    }
    .gallery-form-slide form{
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:12px;
    }
    .gallery-form-slide input,
    .gallery-form-slide textarea{
      border-radius:10px;
      border:1px solid #e5e7eb;
      padding:7px 9px;
      font-size:12px;
    }
    .gallery-form-slide textarea{
      min-height:90px;
      resize:vertical;
    }
    .gallery-controls{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:8px;
      font-size:11px;
    }
    .gallery-nav-btn{
      border-radius:999px;
      border:1px solid rgba(248,250,252,0.4);
      background:rgba(15,23,42,0.8);
      color:white;
      padding:6px 10px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
      font-size:12px;
    }
    .gallery-caption{
      margin-top:4px;
      font-size:11px;
      color:#e5e7eb;
    }
    .gallery-dots{
      display:flex;
      gap:4px;
      align-items:center;
    }
    .gallery-dot{
      width:6px;
      height:6px;
      border-radius:999px;
      background:rgba(148,163,184,0.6);
    }
    .gallery-dot.active{
      background:#facc15;
      width:14px;
    }

    footer{
      padding:10px 14px;
      background:#f9fafb;
      border-top:1px solid #e5e7eb;
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      z-index:30;
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-size:11px;
    }
    .stats{
      display:flex;
      gap:10px;
      align-items:center;
    }

    /* MOBILE-FIRST ADJUSTMENTS */
    @media (max-width:768px){
      header{
        padding:10px 10px;
      }
      .controls{
        display:none;
      }
      .container{
        padding:10px 10px 72px;
      }
      .banner{
        flex-direction:column;
        align-items:flex-start;
        border-radius:16px;
      }
      .banner-stats{
        width:100%;
        display:flex;
        justify-content:space-between;
        margin-top:6px;
      }
      .expo-hall{
        grid-template-columns:repeat(2,minmax(0,1fr));
      }
      .layout-row{
        flex-direction:column;
      }
      aside{
        width:100%;
      }
      .stall{
        border-radius:18px 18px 0 0;
      }
      .featured-grid{
        grid-template-columns:repeat(2,minmax(0,1fr));
      }
      footer{
        padding:8px 10px;
      }
      .gallery-content{
        padding:10px 10px 16px;
      }
      #galleryImage{
        max-height:260px;
      }
    }

    @media (max-width:480px){
      .expo-hall{
        grid-template-columns:repeat(2,minmax(0,1fr));
      }
      .featured-grid{
        grid-template-columns:repeat(1,minmax(0,1fr));
      }
    }

    @media (min-width:1024px){
      header{
        padding:18px 28px;
      }
      .container{
        padding:18px 28px 80px;
      }
      .expo-hall{
        grid-template-columns:repeat(4,minmax(0,1fr));
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">MPE</div>
      <div>
        <h1>Mumbai Property Expo</h1>
        <div class="brand-sub">Digital Expo — CREDAI-MCHI</div>
      </div>
    </div>
    <div class="controls">
      <input id="search" placeholder="Search…" />
      <select id="filter">
        <option value="all">All</option>
        <option value="under1">Under ₹1 Cr</option>
        <option value="1to3">₹1–3 Cr</option>
        <option value="3plus">₹3+ Cr</option>
      </select>
      <button id="enterHall" class="btn primary">Hall</button>
    </div>
  </header>

  <div class="container">
    <div class="banner">
      <div style="flex:1">
        <h2>Mumbai Property Expo — Digital Edition</h2>
        <p>Walk a virtual real estate expo. Enter developer stalls, browse projects, and then deep-dive into full visual galleries with an enquiry slide.</p>
      </div>
      <div class="banner-stats">
        <div>
          <div>Developers</div>
          <div id="devCount" class="banner-stat-number">0</div>
        </div>
        <div style="margin-left:12px;">
          <div>Properties</div>
          <div id="propCount" class="banner-stat-number">0</div>
        </div>
      </div>
    </div>

    <div id="expoArea">
      <div class="section-label">Expo Hall — Tap a stall</div>
      <div class="expo-hall" id="hall"></div>
    </div>

    <div class="layout-row">
      <div style="flex:1;min-width:0;">
        <div class="section-label">Featured Projects</div>
        <div id="featured" class="featured-grid"></div>
      </div>
      <aside>
        <div class="card">
          <div class="card-title">Your Visits</div>
          <div class="card-sub">Leads you requested will appear here. You can download them as JSON.</div>
          <div class="lead-list" id="leadList">No leads yet</div>
          <button id="downloadLeads" class="btn secondary" style="margin-top:6px;width:100%;justify-content:center;">Download Leads (JSON)</button>
        </div>
      </aside>
    </div>
  </div>

  <!-- Developer stall: lists 2 projects only -->
  <div class="modal" id="modal">
    <div class="stall">
      <div class="stall-header">
        <div class="stall-drag"></div>
      </div>
      <div class="stall-top">
        <div class="stall-logo-wrap">
          <div id="stallLogo"></div>
        </div>
        <div>
          <div id="stallName" class="stall-name">Developer Name</div>
          <div id="stallTag" class="stall-tag">2 projects on display</div>
        </div>
      </div>

      <div class="stall-body">
        <div class="card-sub" style="margin-top:6px;">Tap any project image to enter the full-screen gallery.</div>
        <div id="projectList" class="project-list"></div>
        <button type="button" id="closeStall" class="btn secondary" style="margin-top:10px;align-self:flex-end;">Close</button>
      </div>
    </div>
  </div>

  <!-- Gallery modal: 10 images + 1 map + enquiry form slide -->
  <div class="gallery-modal" id="galleryModal">
    <div class="gallery-content">
      <div class="gallery-header">
        <div>
          <div id="galleryTitle" class="gallery-title">Project Gallery</div>
          <div id="gallerySub" class="gallery-sub"></div>
        </div>
        <button class="gallery-close" id="galleryClose">&times;</button>
      </div>

      <div class="gallery-frame">
        <img id="galleryImage" src="" alt="Gallery slide" />
        <div class="gallery-form-slide" id="galleryFormSlide">
          <div style="font-weight:600;margin-bottom:6px;">Enquiry Form</div>
          <form id="galleryEnquiryForm">
            <input id="gName" placeholder="Your name" />
            <input id="gPhone" placeholder="Mobile number (required)" required />
            <textarea id="gMsg" placeholder="Message (optional)"></textarea>
            <button type="submit" class="btn primary" style="margin-top:4px;align-self:flex-start;">Submit enquiry</button>
          </form>
        </div>
      </div>

      <div class="gallery-controls">
        <button class="gallery-nav-btn" id="prevSlide">&#x276E; Prev</button>
        <div>
          <div id="galleryCaption" class="gallery-caption"></div>
          <div class="gallery-dots" id="galleryDots"></div>
        </div>
        <button class="gallery-nav-btn" id="nextSlide">Next &#x276F;</button>
      </div>
    </div>
  </div>

  <footer>
    <div>© Mumbai Property Expo — Prototype</div>
    <div class="stats">
      <span style="color:#6b7280;">Mode</span>
      <span id="mode" style="font-weight:700;color:var(--blue-dark);">Stalls view</span>
    </div>
  </footer>

  <script>
    // ---- DATA DEFINITIONS -------------------------------------------------

    var NAMES = [
      "Lodha", "Seth Developers", "Prestige Group", "Kalpataru Builders", "Arkade Developers","Gowda Realty",
      "Modi Spaces", "Hiranandani", "New India", "Concord Developers", "Srushti Builders",
      "Samarth Group", "Mayfair", "Rustomjee", "Oberoi Realties", "Neelkanth Group",
      "Godrej Properties", "Brigade Group", "Mahindra Life Spaces", "Suntek Realy", "K Raheja",
      "L&T", "DLF", "Runwal", "Paranjpe", "Wascon", "J P Infra", "Shapurji Palonji", "Casa Grande",
      "Century Real Estate", "India Bulls"
    ];

    var CURATED_IMAGES = {
      "Lodha": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Seth Developers": [
        "https://images.unsplash.com/photo-1501183638710-841dd1904471?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1507089947368-19c1da9775ae?auto=format&fit=crop&w=1200&q=80"
      ],
      "Prestige Group": [
        "https://images.unsplash.com/photo-1516156008625-3a9d6067fab5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1486304873000-235643847519?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1517887121-3a9dfdddfd3e?auto=format&fit=crop&w=1200&q=80"
      ],
      "Kalpataru Builders": [
        "https://images.unsplash.com/photo-1570129477492-45c003edd2be?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1501183638710-841dd1904471?auto=format&fit=crop&w=1200&q=80"
      ],
      "Arkade Developers": [
        "https://images.unsplash.com/photo-1572120360610-d971b9d7767c?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1556912998-c57cc6b63cd7?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=1200&q=80"
      ],
      "Gowda Realty": [
        "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1200&q=80"
      ],
      "Modi Spaces": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Hiranandani": [
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1505691723518-36a1b2b44b7f?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1516156008625-3a9d6067fab5?auto=format&fit=crop&w=1200&q=80"
      ],
      "New India": [
        "https://images.unsplash.com/photo-1507089947368-19c1da9775ae?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=1200&q=80"
      ],
      "Concord Developers": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=1200&q=80"
      ],
      "Srushti Builders": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Samarth Group": [
        "https://images.unsplash.com/photo-1494526585095-c41746248156?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1467269204594-9661b134dd2b?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1491553895911-0055eca6402d?auto=format&fit=crop&w=1200&q=80"
      ],
      "Mayfair": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Rustomjee": [
        "https://images.unsplash.com/photo-1507089947368-19c1da9775ae?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1486304873000-235643847519?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=1200&q=80"
      ],
      "Oberoi Realties": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1200&q=80"
      ],
      "Neelkanth Group": [
        "https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1501183638710-841dd1904471?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1517887121-3a9dfdddfd3e?auto=format&fit=crop&w=1200&q=80"
      ],
      "Godrej Properties": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Brigade Group": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Mahindra Life Spaces": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Suntek Realy": [
        "https://images.unsplash.com/photo-1516156008625-3a9d6067fab5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1200&q=80"
      ],
      "K Raheja": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "L&T": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "DLF": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Runwal": [
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1200&q=80"
      ],
      "Paranjpe": [
        "https://images.unsplash.com/photo-1501183638710-841dd1904471?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1516156008625-3a9d6067fab5?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?auto=format&fit=crop&w=1200&q=80"
      ],
      "Wascon": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "J P Infra": [
        "https://images.unsplash.com/photo-1486304873000-235643847519?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1556912998-c57cc6b63cd7?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1200&q=80"
      ],
      "Shapurji Palonji": [
        "https://images.unsplash.com/photo-1494526585095-c41746248156?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1505691723518-36a1b2b44b7f?auto=format&fit=crop&w=1200&q=80"
      ],
      "Casa Grande": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1517887121-3a9dfdddfd3e?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ],
      "Century Real Estate": [
        "https://images.unsplash.com/photo-1501183638710-841dd1904471?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?auto=format&fit=crop&w=1200&q=80"
      ],
      "India Bulls": [
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1200&q=80"
      ]
    };

    // Gallery slide set (same curated images reused for all projects for now)
    var GALLERY_SLIDES = [
      {
        type: 'image',
        label: 'Signature residential tower',
        url: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Grand entrance lobby',
        url: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Landscaped gardens and open spaces',
        url: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Amenity floor — gym & clubhouse',
        url: 'https://images.unsplash.com/photo-1517832207067-4db24a2ae47c?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Location connectivity map (illustrative)',
        url: 'https://images.unsplash.com/photo-1502920917128-1aa500764cbd?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Living room — sample interior',
        url: 'https://images.unsplash.com/photo-1505691723518-36a1b2b44b7f?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Bedroom — sample interior',
        url: 'https://images.unsplash.com/photo-1505691938895-1758d7feb511?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Kitchen — sample interior',
        url: 'https://images.unsplash.com/photo-1505691723518-36a1b2b44b7f?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Bath & sanitary fittings',
        url: 'https://images.unsplash.com/photo-1505691723518-36a1b2b44b7f?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Indicative 2 BHK floor plan',
        url: 'https://images.unsplash.com/photo-1523217582562-09d0def993a6?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'image',
        label: 'Evening ambience & lighting',
        url: 'https://images.unsplash.com/photo-1487958449943-2429e8be8625?auto=format&fit=crop&w=1400&q=80'
      },
      {
        type: 'form',
        label: 'Share your details and the sales team will reach out.',
        url: ''
      }
    ];

    function getLogoFor(name){
      var parts = name.split(' ');
      var initials = '';
      for (var i=0;i<parts.length && initials.length<2;i++){
        if(parts[i]) initials += parts[i].charAt(0);
      }
      initials = initials.toUpperCase();
      var colors = ['#D4A037','#1E4DB7','#2B63D4','#C58E2D','#0F1724'];
      var color = colors[name.length % colors.length];
      var svg = "<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' rx='12' fill='"+color+"'/><text x='50%' y='55%' font-size='48' font-family='Arial' fill='#fff' text-anchor='middle' alignment-baseline='middle' font-weight='700'>"+initials+"</text></svg>";
      return 'data:image/svg+xml;utf8,'+encodeURIComponent(svg);
    }

    var FALLBACK_IMAGE = 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1200&q=80';

    function setImgSafe(imgElement, src){
      imgElement.src = src;
      imgElement.onerror = function(){
        imgElement.src = FALLBACK_IMAGE;
      };
    }

    var DEVELOPERS = [];
    var DEV_COUNT = 500;
    var PROPS_PER_DEV = 2;

    for(var d=1; d<=DEV_COUNT; d++){
      var devName = (d-1) < NAMES.length ? NAMES[d-1] : ('Developer '+d);
      var dev = { id: 'dev'+d, name: devName, short: 'Trusted builder', properties: [] };
      for(var p=1; p<=PROPS_PER_DEV; p++){
        var pid = 'dev'+d+'-p'+p;
        var price = Math.round((Math.random()*4 + 0.5)*100)/100;
        var imgUrl;
        if (CURATED_IMAGES[devName]) {
          var arr = CURATED_IMAGES[devName];
          imgUrl = arr[(p-1) % arr.length];
        } else {
          imgUrl = "https://source.unsplash.com/800x480/?mumbai,building,apartment,highrise,architecture,real-estate&sig="+(d*10+p);
        }
        dev.properties.push({ id: pid, title: 'Project '+p+' — '+dev.name, priceCrore: price, imgUrl: imgUrl });
      }
      DEVELOPERS.push(dev);
    }

    // ---- DOM & STATE ------------------------------------------------------

    var hall = document.getElementById('hall');
    var devCountEl = document.getElementById('devCount');
    var propCountEl = document.getElementById('propCount');
    var featured = document.getElementById('featured');
    var modal = document.getElementById('modal');
    var stallName = document.getElementById('stallName');
    var stallTag = document.getElementById('stallTag');
    var stallLogo = document.getElementById('stallLogo');
    var projectList = document.getElementById('projectList');
    var leadList = document.getElementById('leadList');

    var galleryModal = document.getElementById('galleryModal');
    var galleryImage = document.getElementById('galleryImage');
    var galleryFormSlide = document.getElementById('galleryFormSlide');
    var galleryTitle = document.getElementById('galleryTitle');
    var gallerySub = document.getElementById('gallerySub');
    var galleryCaption = document.getElementById('galleryCaption');
    var galleryDots = document.getElementById('galleryDots');
    var galleryClose = document.getElementById('galleryClose');
    var prevSlideBtn = document.getElementById('prevSlide');
    var nextSlideBtn = document.getElementById('nextSlide');
    var galleryEnquiryForm = document.getElementById('galleryEnquiryForm');

    var LEADS = [];
    try {
      LEADS = JSON.parse(localStorage.getItem('mpe_leads') || '[]');
    } catch(e){
      LEADS = [];
    }

    var currentGallerySlides = [];
    var currentSlideIndex = 0;
    var currentGalleryContext = { devName: '', projectTitle: '' };

    function renderHall(){
      var html = '';
      for (var i=0;i<DEVELOPERS.length;i++){
        var dev = DEVELOPERS[i];
        html += '<div class="booth" data-id="'+dev.id+'">';
        html += '<div class="dev-name">'+dev.name+'</div>';
        html += '<div class="projects">';
        for (var j=0;j<dev.properties.length;j++){
          var p = dev.properties[j];
          html += '<img class="project-thumb" src="'+p.imgUrl+'" loading="lazy" onerror="this.src=\''+FALLBACK_IMAGE+'\'">';
        }
        html += '</div></div>';
      }
      hall.innerHTML = html;

      var booths = hall.getElementsByClassName('booth');
      for (var k=0;k<booths.length;k++){
        (function(){
          var el = booths[k];
          var id = el.getAttribute('data-id');
          var dev = null;
          for (var z=0;z<DEVELOPERS.length;z++){
            if (DEVELOPERS[z].id === id){ dev = DEVELOPERS[z]; break; }
          }
          if (dev){
            el.addEventListener('click', function(){
              openStall(dev);
            });
          }
        })();
      }

      devCountEl.textContent = DEVELOPERS.length;
      propCountEl.textContent = DEVELOPERS.length * PROPS_PER_DEV;
    }

    function renderFeatured(){
      featured.innerHTML = '';
      var cards = [];
      for (var i=0;i<8;i++){
        var dIndex = Math.floor(Math.random()*DEVELOPERS.length);
        var dev = DEVELOPERS[dIndex];
        var pIndex = Math.floor(Math.random()*dev.properties.length);
        cards.push(dev.properties[pIndex]);
      }
      for (var c=0;c<cards.length;c++){
        var p = cards[c];
        var card = document.createElement('div');
        card.className = 'featured-card';
        var inner = '';
        inner += '<img src="'+p.imgUrl+'" onerror="this.src=\''+FALLBACK_IMAGE+'\'">';
        inner += '<div class="featured-title">'+p.title+'</div>';
        inner += '<div class="featured-price">Starting ₹'+p.priceCrore+' Cr</div>';
        inner += '<div class="featured-actions"><button class="btn primary" onclick="openProperty(\''+p.id+'\')">View</button></div>';
        card.innerHTML = inner;
        featured.appendChild(card);
      }
    }

    function openStall(dev){
      stallName.textContent = dev.name;
      stallTag.textContent = dev.properties.length + ' project(s) on display';
      stallLogo.innerHTML = '<img src="'+getLogoFor(dev.name)+'" style="width:100%;height:100%;object-fit:cover;border-radius:16px;">';

      projectList.innerHTML = '';
      for (var i=0;i<dev.properties.length;i++){
        var p = dev.properties[i];
        var card = document.createElement('div');
        card.className = 'project-card';
        var html = '';
        html += '<img src="'+p.imgUrl+'" onerror="this.src=\''+FALLBACK_IMAGE+'\'" data-devid="'+dev.id+'" data-propid="'+p.id+'" class="project-image-click">';
        html += '<div>';
        html += '<div class="project-info-title">'+p.title+'</div>';
        html += '<div class="project-info-price">From ₹'+p.priceCrore+' Cr</div>';
        html += '<div class="project-info-actions"><button class="btn primary" data-devid="'+dev.id+'" data-propid="'+p.id+'">Open gallery</button></div>';
        html += '</div>';
        card.innerHTML = html;
        projectList.appendChild(card);
      }

      var imgs = projectList.getElementsByClassName('project-image-click');
      for (var j=0;j<imgs.length;j++){
        imgs[j].addEventListener('click', function(e){
          var devId = e.target.getAttribute('data-devid');
          var propId = e.target.getAttribute('data-propid');
          openProjectGallery(devId, propId);
        });
      }
      var btns = projectList.getElementsByTagName('button');
      for (var b=0;b<btns.length;b++){
        btns[b].addEventListener('click', function(e){
          var devId = e.target.getAttribute('data-devid');
          var propId = e.target.getAttribute('data-propid');
          openProjectGallery(devId, propId);
        });
      }

      modal.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeStall(){
      modal.classList.remove('open');
      document.body.style.overflow = '';
    }

    function openProjectGallery(devId, propId){
      var dev = null;
      for (var i=0;i<DEVELOPERS.length;i++){
        if (DEVELOPERS[i].id === devId){ dev = DEVELOPERS[i]; break; }
      }
      if (!dev) return;
      var project = null;
      for (var j=0;j<dev.properties.length;j++){
        if (dev.properties[j].id === propId){ project = dev.properties[j]; break; }
      }
      if (!project) return;

      currentGalleryContext.devName = dev.name;
      currentGalleryContext.projectTitle = project.title;

      currentGallerySlides = GALLERY_SLIDES.slice();
      currentSlideIndex = 0;

      galleryTitle.textContent = project.title;
      gallerySub.textContent = dev.name + ' • Gallery preview';
      buildDots();
      showCurrentSlide();

      galleryModal.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function buildDots(){
      galleryDots.innerHTML = '';
      for (var i=0;i<currentGallerySlides.length;i++){
        var dot = document.createElement('div');
        dot.className = 'gallery-dot' + (i===currentSlideIndex ? ' active' : '');
        galleryDots.appendChild(dot);
      }
    }

    function showCurrentSlide(){
      var slide = currentGallerySlides[currentSlideIndex];
      if (!slide) return;

      if (slide.type === 'image'){
        galleryImage.style.display = 'block';
        galleryFormSlide.style.display = 'none';
        galleryImage.src = slide.url;
      } else {
        galleryImage.style.display = 'none';
        galleryFormSlide.style.display = 'block';
      }
      galleryCaption.textContent = (currentSlideIndex+1) + '/' + currentGallerySlides.length + ' — ' + slide.label;

      var dots = galleryDots.getElementsByClassName('gallery-dot');
      for (var i=0;i<dots.length;i++){
        if (i===currentSlideIndex){ dots[i].classList.add('active'); }
        else { dots[i].classList.remove('active'); }
      }
    }

    function prevSlide(){
      if (currentGallerySlides.length===0) return;
      currentSlideIndex = (currentSlideIndex - 1 + currentGallerySlides.length) % currentGallerySlides.length;
      showCurrentSlide();
    }

    function nextSlide(){
      if (currentGallerySlides.length===0) return;
      currentSlideIndex = (currentSlideIndex + 1) % currentGallerySlides.length;
      showCurrentSlide();
    }

    function closeGallery(){
      galleryModal.classList.remove('open');
      document.body.style.overflow = '';
    }

    function requestVisit(devId, propId){
      alert('A site visit request has been created for '+propId+' with '+devId+' — (prototype stub).');
    }
    function quickEnquire(devId, propId){
      openProjectGallery(devId, propId);
      currentSlideIndex = currentGallerySlides.length - 1;
      showCurrentSlide();
    }

    window.requestVisit = requestVisit;
    window.quickEnquire = quickEnquire;
    window.openProperty = function(pid){
      alert('Previewing '+pid+' (prototype)');
    };

    galleryEnquiryForm.addEventListener('submit', function(ev){
      ev.preventDefault();
      var name = document.getElementById('gName').value.trim();
      var phone = document.getElementById('gPhone').value.trim();
      var msg = document.getElementById('gMsg').value.trim();
      if(!phone){
        alert('Please enter mobile number');
        return;
      }
      var lead = {
        id: 'lead_'+Date.now(),
        name: name,
        phone: phone,
        propId: currentGalleryContext.projectTitle,
        msg: msg,
        devName: currentGalleryContext.devName,
        date: new Date().toISOString()
      };
      LEADS.push(lead);
      try{
        localStorage.setItem('mpe_leads', JSON.stringify(LEADS));
      }catch(e){}
      renderLeads();
      alert('Enquiry submitted for '+currentGalleryContext.projectTitle);
      galleryEnquiryForm.reset();
    });

    function renderLeads(){
      if(LEADS.length===0){
        leadList.innerHTML = 'No leads yet';
        return;
      }
      leadList.innerHTML = '';
      var reversed = LEADS.slice().reverse();
      for (var i=0;i<reversed.length;i++){
        var l = reversed[i];
        var el = document.createElement('div');
        el.style.padding='4px 2px';
        el.style.borderBottom='1px solid #e5e7eb';
        el.innerHTML =
          "<div style='font-weight:600;'>"+(l.name || 'Anonymous')+" — "+l.phone+"</div>"+
          "<div style='font-size:10px;color:#6b7280;'>"+l.devName+" • "+l.propId+" • "+new Date(l.date).toLocaleString()+"</div>";
        leadList.appendChild(el);
      }
    }

    document.getElementById('closeStall').addEventListener('click',closeStall);
    modal.addEventListener('click', function(e){
      if(e.target === modal){ closeStall(); }
    });

    galleryClose.addEventListener('click', closeGallery);
    galleryModal.addEventListener('click', function(e){
      if(e.target === galleryModal){ closeGallery(); }
    });
    prevSlideBtn.addEventListener('click', prevSlide);
    nextSlideBtn.addEventListener('click', nextSlide);

    document.getElementById('enterHall').addEventListener('click',function(){
      document.getElementById('mode').textContent='Stalls view';
      var area = document.getElementById('expoArea');
      if(area){
        window.scrollTo({top:area.offsetTop-10,behavior:'smooth'});
      }
    });

    document.getElementById('downloadLeads').addEventListener('click',function(){
      if(LEADS.length===0){
        alert('No leads to download');
        return;
      }
      var blob = new Blob([JSON.stringify(LEADS, null, 2)],{type:'application/json'});
      var url = URL.createObjectURL(blob);
      var a = document.createElement('a');
      a.href = url;
      a.download = 'mpe_leads.json';
      a.click();
      URL.revokeObjectURL(url);
    });

    var searchInput = document.getElementById('search');
    if(searchInput){
      searchInput.addEventListener('input', function(e){
        var q = e.target.value.toLowerCase();
        var booths = hall.getElementsByClassName('booth');
        for (var i=0;i<booths.length;i++){
          var dev = DEVELOPERS[i];
          var match = dev.name.toLowerCase().indexOf(q) !== -1;
          if (!match){
            for (var j=0;j<dev.properties.length;j++){
              if (dev.properties[j].title.toLowerCase().indexOf(q) !== -1){
                match = true;
                break;
              }
            }
          }
          booths[i].style.display = match ? 'block' : 'none';
        }
      });
    }

    document.getElementById('filter').addEventListener('change', function(){
      renderFeatured();
    });

    // initial render
    renderHall();
    renderFeatured();
    renderLeads();
  </script>
</body>
</html>
